<div id="conversation">
  <% if @conversation %>
    <% if current_user %>
      <%# array = [] %>
      <%# @conversation.receipts_for(current_user).reverse.each do |receipt| %>
        <%# array << receipt %>
      <%# end %>
      <% @conversation.receipts_for(current_user).reverse.each do |receipt| %>
        <%= render 'messages/show', receipt: receipt %>
        <p>U:RELOAD</p>
        <!-- 999 Need a code that can do something like...
          if message.sender is current_user then show in user format
        -->
      <% end %>
    <% elsif current_counsellor %>
      <% @conversation.receipts_for(current_counsellor).reverse.each do |receipt| %>
        <%= render 'messages/show', receipt: receipt %>
        <p>C:RELOAD</p>
        <!-- 999 Need a code that can do something like...
          if message.sender is user.counsellor then show in counsellor format
        -->
      <% end %>
    <% end %>
  <% end %>
</div>

<div id="chat__form">
  <%= render 'messages/form', conversation: @conversation %>
</div>

<script>
  var element = document.getElementById("chat");
  element.scrollTop = element.scrollHeight;
</script>